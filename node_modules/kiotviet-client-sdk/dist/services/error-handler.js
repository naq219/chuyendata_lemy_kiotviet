"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorHandler = void 0;
const errors_1 = require("../errors");
class ErrorHandler {
    static handleRequestError(error) {
        if (error.response) {
            const status = error.response.status;
            const data = error.response.data;
            const apiErrorStatus = data === null || data === void 0 ? void 0 : data.responseStatus;
            const message = (apiErrorStatus === null || apiErrorStatus === void 0 ? void 0 : apiErrorStatus.message) || (data === null || data === void 0 ? void 0 : data.message) || error.message || `Request failed with status code ${status}`;
            switch (status) {
                case 400:
                    throw new errors_1.ValidationError(message, apiErrorStatus, data);
                case 401:
                    throw new errors_1.AuthenticationError(message, data);
                case 403:
                    throw new errors_1.ForbiddenError(message, data);
                case 404:
                    throw new errors_1.NotFoundError(message, data);
                case 429:
                    throw new errors_1.RateLimitError(message, data);
                default:
                    throw new errors_1.KiotVietApiError(message, status, apiErrorStatus, data);
            }
        }
        if (error.request) {
            throw new errors_1.KiotVietApiError('No response received from KiotViet API', undefined, undefined, {
                request: error.request,
            });
        }
        throw new errors_1.KiotVietApiError(`Request setup error: ${error.message}`, undefined, undefined, error);
    }
}
exports.ErrorHandler = ErrorHandler;
